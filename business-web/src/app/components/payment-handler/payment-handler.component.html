<form clas="checkout-form" [formGroup]='checkoutForm'>
<mat-grid-list cols="4" rowHeight="2:1">
  <mat-grid-tile colspan="4">
    <mat-form-field id="full-width">
    <mat-label>Buyer: </mat-label>
    <input matInput name="fullname" type="text" placeholder="Your full name" formControlName="fullname" #fullname>
    <mat-error *ngIf="checkoutForm.get('fullname').hasError('required')"> This field is <strong> required</strong> </mat-error>
    <mat-hint>  Name on your card  </mat-hint>
    </mat-form-field>
  </mat-grid-tile>
  <mat-grid-tile colspan="2">
    <mat-form-field id="half-width" >
    <mat-label>Email: </mat-label>
    <input matInput name="email" type="email" placeholder="Your email" formControlName="email" #email>
    <mat-error *ngIf="checkoutForm.get('email').hasError('required') && !checkoutForm.get('email').hasError('email')"> This field is <strong> required</strong> </mat-error>
    <mat-error *ngIf="checkoutForm.get('email').hasError('email')" > Your email is invalid </mat-error>
  </mat-form-field>
  </mat-grid-tile>
  <mat-grid-tile colspan="2">
    <mat-form-field id="half-width">
    <mat-label>Phone: </mat-label>
    <input matInput name="phone" type ="tel" maxlength="10"  placeholder="Ex: 6471234567" formControlName="phone" #phone>
    <mat-error *ngIf="checkoutForm.get('phone').hasError('required')"> This field is <strong> required</strong> </mat-error>
  </mat-form-field>
  </mat-grid-tile>
  <mat-grid-tile colspan="4">
    <mat-form-field id="full-width">
    <mat-label>Address: </mat-label>
    <input matInput name="address" type="text" placeholder="Your address" formControlName="address" #address>
    <mat-error *ngIf="checkoutForm.get('address').hasError('required')"> This field is <strong> required</strong> </mat-error>
  </mat-form-field>
  </mat-grid-tile>

  <mat-grid-tile colspan="1">
    <mat-form-field id="small-box">
    <mat-label>City: </mat-label>
    <input matInput name="city" type="text" placeholder="Ex: Toronto" formControlName="city" #city>
    <mat-error *ngIf="checkoutForm.get('city').hasError('required')"> This field is <strong> required</strong> </mat-error>

  </mat-form-field>
  </mat-grid-tile>

  <mat-grid-tile colspan="1">
    <mat-form-field id="small-box">
    <mat-label>State: </mat-label>
    <input matInput name="state" type="text" placeholder="Ex: Ontario" formControlName="state" #state>
    <mat-error *ngIf="checkoutForm.get('state').hasError('required')"> This field is <strong> required</strong> </mat-error>

  </mat-form-field>
  </mat-grid-tile>

  <mat-grid-tile colspan="2">
    <mat-form-field id="small-box">
    <mat-label>Postal Code: </mat-label>
    <input matInput name="zip" type="text" placeholder="Ex: M3N2H2" maxlength='7' formControlName="zip" #zip>
    <mat-error *ngIf="checkoutForm.get('zip').hasError('required')"> This field is <strong> required</strong> </mat-error>

  </mat-form-field>

  </mat-grid-tile>

  <mat-grid-tile colspan="4">
    <div id="card-element" #cardElement>
      <!-- this is for collecting card information -->
    </div>
  </mat-grid-tile>
  <mat-grid-tile colspan="4">

  <button mat-raised-button color="primary" *ngIf="!loading"   igxButtonBackground="#F0D43A" id="payment-submit" (click) = "handleForm($event,fullname.value,address.value,city.value,state.value,zip.value,email.value,phone.value)" [disabled] ="!checkoutForm.valid" >Pay {{planSub.amount / 100}} $CAD</button>
  <mat-spinner *ngIf='loading' id="spinner"></mat-spinner>
  </mat-grid-tile>
  <mat-grid-tile colspan="4">
    <div id="card-error" >
      <p> {{cardError}}</p>
    </div>
    </mat-grid-tile>
</mat-grid-list>

</form>

